#       7/17、数据库的三大范式

### 一、第一范式

- 定义：如果关系模式R的每个关系r的属性都是不可分的数据项，那么就称R是第一范式的模式。
  - 简单的说，每一个属性都是原子项，不可分割。
  - 1NF是关系模式应具备的最起码的条件，如果数据库设计不能满足第一范式，就不称为关系型数据库。关系数据库设计研究的关系规范化是在1NF之上进行的。

### 二、第二范式

- 定义：第二范式在第一范式的基础之上更进一层。第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。也就是说在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中。

  - 学生 课程 教师 教师职称 教材 教室 上课时间
    李四 Spring 张老师 java讲师 《Spring深入浅出》 ３０１ 08:00
    张三 Struts 杨老师 java讲师 《Struts in Action》 ３０２ 13:30

    这里通过（学生，课程）可以确定教师、教师职称，教材，教室和上课时间，所以可以把（学生，课程）作为主键。但是，教材并不完全依赖于（学生，课程），只拿出课程就可以确定教材，因为一个课程，一定指定了某个教材。这就叫不完全依赖，或者部分依赖。出现这种情况，就不满足第二范式。

    修改后，选课表：
    学生 课程 教师 教师职称 教室 上课时间
    李四 Spring 张老师 java讲师 ３０１ 08:00
    张三 Struts 杨老师 java讲师 ３０２ 13:30

    课程表：
    课程 教材 
    Spring 《Spring深入浅出》 
    Struts 《Struts in Action》

  - 第二范式可以说是消除部分依赖。第二范式可以减少插入异常，删除异常和修改异常。

### 三、第三范式

- 定义：第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。

  - 比如在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。而不可以在订单表中添加关于客户其它信息（比如姓名、所属公司等）的字段。如下面这两个表所示的设计就是一个满足第三范式的数据库表。 

  - 订单信息表

    | **订单编号** | **订单项目** | **负责人** | **业务员** | **订单数量** | **客户编号** |
    | -------- | -------- | ------- | ------- | -------- | -------- |
    | 001      | 挖掘机      | 刘明      | 李东明     | 1台       | 1        |
    | 002      | 冲击钻      | 李刚      | 霍新峰     | 8个       | 2        |
    | 003      | 铲车       | 郭新一     | 艾美丽     | 2辆       | 1        |

     客户信息表

    | **客户编号** | **客户名称** | **所属公司** | **联系方式**    |
    | -------- | -------- | -------- | ----------- |
    | 1        | 李聪       | 五一建设     | 13253661015 |
    | 2        | 刘新明      | 个体经营     | 13285746958 |

    这样在查询订单信息的时候，就可以使用客户编号来引用客户信息表中的记录，也不必在订单信息表中多次输入客户信息的内容，减小了数据冗余。

### 四、总结

- 简单的说，
  第一范式就是原子性，字段不可再分割；
  第二范式就是完全依赖，没有部分依赖；
  第三范式就是没有传递依赖。

